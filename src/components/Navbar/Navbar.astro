---
const logoImage = "/assets/logos/admincondominios.png"; // Ruta personalizable

const menuItems = [
  { label: "Inicio", href: "/" },
  {
    label: "Servicios",
    submenu: [
      { label: "Administración", href: "#admin" },
      { label: "Contabilidad", href: "#contabilidad" },
    ],
  },
  { label: "Nosotros", href: "#nosotros" },
  { label: "Contacto", href: "#contacto" },
];

const mobileImage =
  "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?fit=crop&w=800&q=80";
---

<header
  class="fixed top-0 left-0 w-full z-50 bg-white dark:bg-gray-900 shadow-sm transition-all duration-300"
>
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <a href="/" class="flex items-center gap-2">
      <img src={logoImage} alt="Logo" class="h-8 md:h-10 object-contain" />
    </a>

    <!-- Menú Desktop -->
    <nav class="hidden md:flex space-x-6 items-center">
      {
        menuItems.map((item) => (
          <div>
            <a
              href={item.href || "#"}
              class="text-gray-800 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition font-medium"
            >
              {item.label}
            </a>
          </div>
        ))
      }
    </nav>

    <!-- Botón menú móvil -->
    <button
      id="menu-btn"
      class="md:hidden text-2xl text-gray-900 dark:text-white"
    >
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- Overlay y menú lateral -->
  <div
    id="mobile-overlay"
    class="fixed inset-0 z-40 hidden bg-black/40 backdrop-blur-sm transition-opacity duration-300"
  >
    <aside
      id="mobile-menu"
      class="absolute right-0 top-0 h-auto max-h-[90vh] w-full bg-white dark:bg-gray-900 shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto rounded-bl-xl"
    >
      <div
        class="flex justify-between items-center px-4 py-4 border-b border-gray-200 dark:border-gray-700"
      >
        <a href="/" class="flex items-center gap-2">
          <img src={logoImage} alt="Logo" class="h-8 md:h-10 object-contain" />
        </a>
        <button id="menu-close" class="text-2xl text-gray-800 dark:text-white">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <img
        src={mobileImage}
        alt="Menú"
        class="w-full h-40 object-cover rounded-b-xl"
      />

      <nav
        id="mobile-links"
        class="flex flex-col divide-y divide-gray-200 dark:divide-gray-700 text-gray-900 dark:text-white"
      >
        {
          menuItems.map((item) => (
            <div>
              {item.submenu ? (
                <details class="group">
                  <summary class="flex justify-between items-center px-6 py-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800">
                    <span>{item.label}</span>
                    <i class="fas fa-chevron-down group-open:rotate-180 transition-transform duration-300" />
                  </summary>
                  <div class="flex flex-col text-sm">
                    {item.submenu.map((sub) => (
                      <a
                        href={sub.href}
                        class="px-8 py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition"
                      >
                        {sub.label}
                      </a>
                    ))}
                  </div>
                </details>
              ) : (
                <a
                  href={item.href}
                  class="px-6 py-4 text-lg font-medium hover:bg-gray-100 dark:hover:bg-gray-800 transition block"
                >
                  {item.label}
                </a>
              )}
            </div>
          ))
        }
      </nav>
    </aside>
  </div>

  <script is:inline>
    const menuBtn = document.getElementById("menu-btn");
    const menuClose = document.getElementById("menu-close");
    const overlay = document.getElementById("mobile-overlay");
    const menu = document.getElementById("mobile-menu");

    const openMenu = () => {
      overlay.classList.remove("hidden");
      document.body.classList.add("overflow-hidden");
      requestAnimationFrame(() => {
        overlay.classList.add("opacity-100");
        menu.classList.remove("translate-x-full");
      });
    };

    const closeMenu = () => {
      overlay.classList.remove("opacity-100");
      menu.classList.add("translate-x-full");
      setTimeout(() => {
        overlay.classList.add("hidden");
        document.body.classList.remove("overflow-hidden");
      }, 300);
    };

    menuBtn?.addEventListener("click", openMenu);
    menuClose?.addEventListener("click", closeMenu);

    overlay?.addEventListener("click", (e) => {
      if (!menu.contains(e.target)) closeMenu();
    });
  </script>
</header>
