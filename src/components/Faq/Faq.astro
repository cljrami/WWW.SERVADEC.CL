---
const accordionData = [
  {
    title: "¿Por qué hacer auditoría?",
    content: `
      <p>Realizar una revisión por un agente externo apoya a detectar <strong>falencias</strong> o manejo inadecuado de los recursos en la actual administración.</p>
      <p>El estudio debe ayudar a tomar decisiones con <span class="text-indigo-400">cuentas transparentes</span> y alertar situaciones preventivas, garantizando salud financiera y operativa.</p>
    `,
  },
  {
    title: "¿Qué aspectos se revisan?",
    content: `
      <ul class="list-disc pl-5 space-y-2">
        <li><strong>Financieros:</strong> Ingresos y egresos, conciliación bancaria, estado de morosidad.</li>
        <li><strong>Laborales:</strong> Contratos, liquidaciones y leyes sociales.</li>
        <li><strong>Contratos Externos:</strong> Cumplimiento de mantenimientos y pólizas de seguro.</li>
        <li><strong>Reglamento de Copropiedad:</strong> Revisión y actualización según Ley 21.442.</li>
      </ul>
    `,
  },
  {
    title: "Resumen del Servicio",
    content: `
      <p>Se realiza un estudio detallado según los cuatro puntos destacados, entregando un <span class="text-green-400">informe</span> con áreas de mejora para una administración responsable y sostenible.</p>
    `,
  },
  {
    title: "¿Qué requiere SERVADEC para realizar la auditoría?",
    content: `
      <p>Para realizar la auditoría, requerimos acceso a la siguiente información:</p>
      <ul class="list-disc pl-5 space-y-2">
        <li>Plataformas de gestión administrativa.</li>
        <li>Acceso a Dirección del Trabajo, Previred y SII.</li>
        <li>Información bancaria y contratos laborales.</li>
        <li>Reglamentos del condominio y actas de asamblea.</li>
      </ul>
    `,
  },
];
---

<div class="max-w-3xl mx-auto p-6 space-y-4">
  {
    accordionData.map((item, index) => (
      <div class="accordion-item bg-white/10 rounded-xl p-2 shadow-2xl m-2 backdrop-blur-md  rounded-MD">
        <button class="accordion-header w-full flex justify-between items-center p-4 text-left text-white font-semibold text-lg focus:outline-none">
          {item.title}
          <i class="fa-solid fa-chevron-down transition-transform duration-300" />
        </button>
        <div
          class="accordion-content px-4 pb-4 text-gray-300 hidden"
          set:html={item.content}
        />
      </div>
    ))
  }
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const accordionItems = document.querySelectorAll(".accordion-item");

    accordionItems.forEach((item) => {
      const header = item.querySelector(".accordion-header");
      const content = item.querySelector(
        ".accordion-content"
      ) as HTMLElement | null;
      const icon = header?.querySelector("i");

      if (!header || !content || !icon) return;

      header.addEventListener("click", () => {
        const isOpen = content.classList.contains("open");

        // Cerrar todos los acordeones
        document.querySelectorAll(".accordion-content").forEach((c) => {
          (c as HTMLElement).classList.remove("open");
          (c as HTMLElement).classList.add("hidden");
          (c as HTMLElement).style.maxHeight = "";
        });

        document.querySelectorAll(".accordion-header i").forEach((i) => {
          i.classList.remove("rotate-180");
        });

        // Si estaba cerrado, abrirlo
        if (!isOpen) {
          content.classList.add("open");
          content.classList.remove("hidden");
          content.style.maxHeight = content.scrollHeight + "px";
          icon.classList.add("rotate-180");
        }
      });
    });
  });
</script>

<style>
  .accordion-content {
    overflow: hidden;
    transition:
      max-height 0.3s ease-out,
      opacity 0.3s ease-out;
    max-height: 0;
    opacity: 0;
  }

  .accordion-content.open {
    opacity: 1;
    max-height: 1000px; /* Un valor alto para permitir la expansión */
  }

  .rotate-180 {
    transform: rotate(180deg);
  }
</style>
